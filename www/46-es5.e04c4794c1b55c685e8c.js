function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"/2Y2":function(n,t,e){"use strict";e.r(t);var i=e("ofXK"),o=e("3Pt+"),a=e("c7TG"),r=e("tyNb"),l=e("mrSG"),s=e("lGQG"),c=e("2g2N"),u=e("FAH8"),b=e("B7Rs"),h=e("HlzF"),d=e("te5A"),f=e("5dVO"),g=e("n90K"),p=e("fXoL"),m=["range"];function y(n,t){if(1&n){var e=p.ac();p.Zb(0,"ion-fab",7),p.hc("click",(function(n){return p.qc(e),p.jc().downloadAllBhajans()})),p.Zb(1,"ion-fab-button",0),p.Xb(2,"ion-icon",8),p.Yb(),p.Yb()}}function v(n,t){if(1&n){var e=p.ac();p.Zb(0,"ion-list"),p.Zb(1,"ion-item-sliding"),p.Zb(2,"ion-item",9),p.Zb(3,"ion-card"),p.Zb(4,"div",10),p.Xb(5,"img",11),p.Yb(),p.Zb(6,"ion-label",12),p.uc(7),p.Yb(),p.Yb(),p.Yb(),p.Zb(8,"ion-item-options",13),p.Zb(9,"button",14),p.hc("click",(function(n){p.qc(e);var i=t.$implicit;return p.jc().removeplaylistdhuns(i)})),p.Xb(10,"ion-icon",15),p.Yb(),p.Zb(11,"button",14),p.hc("click",(function(n){p.qc(e);var i=t.$implicit;return p.jc().downloadplaylistdhuns(i)})),p.Xb(12,"ion-icon",16),p.Yb(),p.Yb(),p.Yb(),p.Yb()}if(2&n){var i=t.$implicit;p.Mb(5),p.nc("src",i.image,p.rc),p.Mb(2),p.wc(" ",i.title," ")}}function k(n,t){if(1&n){var e=p.ac();p.Zb(0,"ion-button",22),p.hc("click",(function(n){return p.qc(e),p.jc(2).togglePlayer(!1)})),p.Xb(1,"ion-icon",26),p.Yb()}}function w(n,t){if(1&n){var e=p.ac();p.Zb(0,"ion-button",22),p.hc("click",(function(n){return p.qc(e),p.jc(2).togglePlayer(!0)})),p.Xb(1,"ion-icon",27),p.Yb()}}function P(n,t){if(1&n){var e=p.ac();p.Zb(0,"ion-footer"),p.Zb(1,"ion-toolbar",17),p.Zb(2,"ion-row"),p.Zb(3,"ion-col",18),p.uc(4),p.Yb(),p.Zb(5,"ion-col",19),p.Zb(6,"ion-range",20,21),p.hc("ngModelChange",(function(n){return p.qc(e),p.jc().progress=n}))("touchend",(function(n){return p.qc(e),p.jc().seek()}))("mouseup",(function(n){return p.qc(e),p.jc().seek()})),p.Yb(),p.Yb(),p.Zb(8,"ion-col",18),p.Zb(9,"ion-button",22),p.hc("click",(function(n){return p.qc(e),p.jc().prev()})),p.Xb(10,"ion-icon",23),p.Yb(),p.tc(11,k,2,0,"ion-button",24),p.tc(12,w,2,0,"ion-button",24),p.Zb(13,"ion-button",22),p.hc("click",(function(n){return p.qc(e),p.jc().next()})),p.Xb(14,"ion-icon",25),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb()}if(2&n){var i=p.jc();p.Mb(4),p.wc(" ",i.activeTrack.title," "),p.Mb(2),p.mc("ngModel",i.progress),p.Mb(5),p.mc("ngIf",!i.isPlaying),p.Mb(1),p.mc("ngIf",i.isPlaying)}}var j,C,x=[{path:"",component:(j=function(){function n(t,e,i,o,a,r,l,s,c){var u=this;_classCallCheck(this,n),this.authService=t,this.toastService=e,this.file=i,this.platform=o,this.transfer=a,this.alertController=r,this.fileOpener=l,this.loader=s,this.storageService=c,this.activeTrack=null,this.player=null,this.isPlaying=!1,this.duration=-1,this.display_position="00:00",this.display_duration="00:00",this.progress=0,this.storageService.getIMEI().then((function(n){console.log("IMEIBHAJAN => "+n),u.imei=n,u.getAudioDhuns()}))}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"getAudioDhuns",value:function(){var n=this;this.loader.loadingPresent(),this.authService.GetDownloadList({imei_number:this.imei,type:"Bhajans"}).subscribe((function(t){n.loader.loadingDismiss(),console.log(t),n.Bhajans=t}),(function(t){n.loader.loadingDismiss(),console.log("error")}))}},{key:"removeplaylistdhuns",value:function(n){var t=this;this.authService.DeleteDownloadList({id:n.id}).subscribe((function(n){console.log(n),t.getAudioDhuns()}),(function(n){console.log("error")}))}},{key:"downloadplaylistdhuns",value:function(n){return Object(l.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:n.title,message:"Download Audio",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(n){console.log("Confirm Cancel: blah")}},{text:"Download",handler:function(){var t;t=i.platform.is("ios")?i.file.documentsDirectory:i.file.externalRootDirectory+"/ShreeRamSharnam/";var e=i.transfer.create();console.log(n.url),i.loader.loadingPresent("Downloading....Please wait it will take time to download!"),e.download(n.url,t+n.title+".mp3").then((function(n){var t=n.toURL();console.log(t),i.loader.loadingDismiss(),i.toastService.presentToast("Download Completed...!")})),console.log("Confirm Okay")}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"downloadAllBhajans",value:function(){var n,t=this;n=this.platform.is("ios")?this.file.documentsDirectory:this.file.externalRootDirectory+"/ShreeRamSharnam/";var e=this.transfer.create();this.loader.loadingPresent("Downloading....Please wait it will take time to download!");for(var i=function(i){e.download(t.Bhajans[i].url,n+t.Bhajans[i].title+".mp3").then((function(n){var e=n.toURL();console.log(e),t.loader.loadingDismiss(),t.toastService.presentToast(t.Bhajans[i].title+"  Download Completed...!")}))},o=0;o<this.Bhajans.length;o++)i(o)}},{key:"start",value:function(n){var t=this;this.player&&this.player.stop(),this.player=new h.Howl({src:[n.url],html5:!0,onplay:function(){t.isPlaying=!0,t.activeTrack=n,t.updateProgess()},onend:function(){}}),this.player.play()}},{key:"togglePlayer",value:function(n){this.isPlaying=!n,n?this.player.pause():this.player.play()}},{key:"next",value:function(){var n=this.Bhajans.indexOf(this.activeTrack);this.start(n!==this.Bhajans.length-1?this.Bhajans[n+1]:this.Bhajans[0])}},{key:"prev",value:function(){var n=this.Bhajans.indexOf(this.activeTrack);this.start(n>0?this.Bhajans[n-1]:this.Bhajans[this.Bhajans.length-1])}},{key:"seek",value:function(){var n=+this.range.value,t=this.player.duration();this.player.seek(t*(n/100))}},{key:"updateProgess",value:function(){var n=this,t=this.player.seek();this.progress=t/this.player.duration()*100||0,setTimeout((function(){n.updateProgess()}),1e3)}}]),n}(),j.\u0275fac=function(n){return new(n||j)(p.Wb(s.a),p.Wb(c.a),p.Wb(u.a),p.Wb(a.V),p.Wb(b.a),p.Wb(a.b),p.Wb(d.a),p.Wb(f.a),p.Wb(g.a))},j.\u0275cmp=p.Qb({type:j,selectors:[["app-bhajans-downloadlist"]],viewQuery:function(n,t){var e;1&n&&p.yc(m,!0),2&n&&p.pc(e=p.ic())&&(t.range=e.first)},decls:11,vars:3,consts:[["color","primary"],["slot","start"],["autoHide","false"],["slot","end","src","assets/images/toolbar.png",1,"img1"],["vertical","center","horizontal","end","edge","","slot","fixed",3,"click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["vertical","center","horizontal","end","edge","","slot","fixed",3,"click"],["name","download"],["lines","none"],[1,"div_20"],[3,"src"],[1,"label"],["side","end"],["ion-button","",3,"click"],["slot","icon-only","name","trash",1,"icon-inner"],["slot","icon-only","name","download",1,"icon-inner"],["color","dark"],["size","12",1,"ion-text-center"],["size","12"],["max","100","color","primary",3,"ngModel","ngModelChange","touchend","mouseup"],["range",""],["fill","clear","color","primary",3,"click"],["slot","icon-only","name","skip-backward"],["fill","clear","color","primary",3,"click",4,"ngIf"],["slot","icon-only","name","skip-forward"],["slot","icon-only","name","play"],["slot","icon-only","name","pause"]],template:function(n,t){1&n&&(p.Zb(0,"ion-header"),p.Zb(1,"ion-toolbar",0),p.Zb(2,"ion-buttons",1),p.Xb(3,"ion-menu-button",2),p.Yb(),p.Zb(4,"ion-label"),p.uc(5," Bhajans Downloadlist "),p.Yb(),p.Xb(6,"img",3),p.Yb(),p.Yb(),p.Zb(7,"ion-content"),p.tc(8,y,3,0,"ion-fab",4),p.tc(9,v,13,2,"ion-list",5),p.Yb(),p.tc(10,P,15,4,"ion-footer",6)),2&n&&(p.Mb(8),p.mc("ngForOf",t.Bhajans),p.Mb(1),p.mc("ngForOf",t.Bhajans),p.Mb(1),p.mc("ngIf",t.activeTrack))},directives:[a.q,a.N,a.f,a.z,a.w,a.l,i.h,i.i,a.m,a.n,a.r,a.x,a.v,a.t,a.g,a.u,a.o,a.D,a.k,a.B,a.Y,o.c,o.d,a.e],styles:[".div_20[_ngcontent-%COMP%]{width:20%;display:inline-block;margin:0;padding:5px;float:left}.label[_ngcontent-%COMP%]{height:50px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;word-break:break-all;white-space:normal}.icon-inner[_ngcontent-%COMP%]{font-size:25px;display:block}.icon-inner[_ngcontent-%COMP%], .ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.ion-icon[_ngcontent-%COMP%]{font-size:40px}.rangePlaytime[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}.rangePlaytime[_ngcontent-%COMP%]   .startTime[_ngcontent-%COMP%]{padding-left:9px}.rangePlaytime[_ngcontent-%COMP%]   .endTime[_ngcontent-%COMP%]{padding-right:15px}.img1[_ngcontent-%COMP%]{height:30px;width:100px;max-width:100%;border:0}ion-card[_ngcontent-%COMP%]{width:100%;margin-top:11px;margin-bottom:6px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.list-ios[_ngcontent-%COMP%]{margin-bottom:0!important}ion-list[_ngcontent-%COMP%]{padding:0}"]}),j)}],M=((C=function n(){_classCallCheck(this,n)}).\u0275mod=p.Ub({type:C}),C.\u0275inj=p.Tb({factory:function(n){return new(n||C)},imports:[[r.i.forChild(x)],r.i]}),C);e.d(t,"BhajansDownloadlistPageModule",(function(){return _}));var Y,_=((Y=function n(){_classCallCheck(this,n)}).\u0275mod=p.Ub({type:Y}),Y.\u0275inj=p.Tb({factory:function(n){return new(n||Y)},imports:[[i.b,o.a,a.O,M]]}),Y)}}]);